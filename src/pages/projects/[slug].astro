---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map(project => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await render(project);
---

<BaseLayout title={`${project.data.title} — Raviteja`} description={project.data.description}>
  <!-- Back -->
  <a href="/projects" style="color:var(--fg-muted); font-size:0.875rem;" class="inline-flex items-center gap-1 hover:opacity-70 transition-opacity mb-8">
    ← All projects
  </a>

  <!-- Header -->
  <header class="mb-10">
    <h1 style="color:var(--fg); font-size:2rem; font-weight:700; margin:0 0 0.75rem;">
      {project.data.title}
    </h1>
    <p style="color:var(--fg-muted); font-size:1rem; margin:0 0 1rem;">
      {project.data.description}
    </p>
    <div class="flex flex-wrap gap-2 mb-4">
      {project.data.tech.map((t: string) => <span class="tag">{t}</span>)}
    </div>
    <div class="flex gap-3">
      {project.data.github && (
        <a href={project.data.github} target="_blank" rel="noopener noreferrer"
           style="border:1px solid var(--border); color:var(--fg-muted); border-radius:6px; padding:0.35rem 0.85rem; font-size:0.85rem;"
           class="hover:border-[var(--accent)] transition-colors">
          View on GitHub →
        </a>
      )}
      {project.data.liveUrl && (
        <a href={project.data.liveUrl} target="_blank" rel="noopener noreferrer"
           style="border:1px solid var(--accent); color:var(--accent); border-radius:6px; padding:0.35rem 0.85rem; font-size:0.85rem;"
           class="hover:opacity-75 transition-opacity">
          Live demo →
        </a>
      )}
    </div>
  </header>

  <!-- Content -->
  <article class="prose">
    <Content />
  </article>
</BaseLayout>
