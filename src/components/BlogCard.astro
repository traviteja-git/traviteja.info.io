---
interface Props {
  title: string;
  description: string;
  date: string;
  slug: string;
  tags?: string[];
  image?: string;
}

const { title, description, date, slug, tags = [], image } = Astro.props;
const formatted = new Date(date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
---

<a href={`/blog/${slug}`} class="block group" style="text-decoration:none;">
  <article style="border-bottom:1px solid var(--border); padding:1.5rem 0; display:flex; align-items:flex-start; gap:1.5rem;" class="group-hover:opacity-90 transition-opacity">
    <!-- Text -->
    <div style="flex:1; min-width:0;">
      <h2 style="color:var(--fg); font-size:1.1rem; font-weight:700; line-height:1.4; margin:0 0 0.5rem;" class="group-hover:text-[var(--accent)] transition-colors">
        {title}
      </h2>
      <p style="color:var(--fg-muted); font-size:0.9rem; line-height:1.5; margin:0 0 0.75rem;" class="line-clamp-2">
        {description}
      </p>
      <div style="display:flex; align-items:center; gap:0.75rem; flex-wrap:wrap;">
        <time style="color:var(--fg-muted); font-size:0.8rem;" datetime={date}>{formatted}</time>
        {tags.length > 0 && tags.slice(0, 3).map(tag => <span class="tag">{tag}</span>)}
      </div>
    </div>

    <!-- Thumbnail (hidden on mobile) -->
    {image && (
      <div class="hidden sm:block" style="flex-shrink:0; width:120px; height:80px; border-radius:4px; overflow:hidden; border:1px solid var(--border);">
        <img
          src={image}
          alt={title}
          style="width:100%; height:100%; object-fit:cover; display:block;"
        />
      </div>
    )}
  </article>
</a>
